{% extends 'base.html.twig' %} 
{% block body %} 
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
   
   <!-- default styles -->

<style>
@import "//codepen.io/jatinn_r/pen/OJPLZLX.css";
.social-btns .btn,
.social-btns .btn:before,
.social-btns .btn .fa {
  transition: all 0.35s;
  transition-timing-function: cubic-bezier(0.31, -0.105, 0.43, 1.59);
}
.social-btns .btn:before {
  top: 90%;
  left: -110%;
}
.social-btns .btn .fa {
  -webkit-transform: scale(0.8);
  transform: scale(0.8);
}
.social-btns .btn.facebook:before {
  background-color: #3b5998;
}
.social-btns .btn.facebook .fa {
  color: #3b5998;
}
.social-btns .btn.twitter:before {
  background-color: #00aff0;
}
.social-btns .btn.twitter .fa {
  color: #00aff0;
}
.social-btns .btn:focus:before,
.social-btns .btn:hover:before {
  top: -10%;
  left: -10%;
}
.social-btns .btn:focus .fa,
.social-btns .btn:hover .fa {
  color: #fff;
  -webkit-transform: scale(1);
  transform: scale(1);
}
.social-btns {
  height: 90px;
  margin: auto;
  font-size: 0;
  text-align: center;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.social-btns .btn {
  display: inline-block;
  background-color: #fff;
  width: 90px;
  height: 90px;
  line-height: 90px;
  margin: 0 10px;
  text-align: center;
  position: relative;
  overflow: hidden;
  border-radius: 28%;
  box-shadow: 0 5px 15px -5px rgba(0, 0, 0, 0.1);
  opacity: 0.99;
}
.social-btns .btn:before {
  content: "";
  width: 120%;
  height: 120%;
  position: absolute;
  -webkit-transform: rotate(45deg);
  transform: rotate(45deg);
}
.social-btns .btn .fa {
  font-size: 38px;
  vertical-align: middle;
}
</style>
<link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/css/star-rating.min.css" media="all" rel="stylesheet" type="text/css" />

<!-- with v4.1.0 Krajee SVG theme is used as default (and must be loaded as below) - include any of the other theme CSS files as mentioned below (and change the theme property of the plugin) -->
<link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/themes/krajee-svg/theme.css" media="all" rel="stylesheet" type="text/css" />

<!-- important mandatory libraries -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/js/star-rating.min.js" type="text/javascript"></script>

<!-- with v4.1.0 Krajee SVG theme is used as default (and must be loaded as below) - include any of the other theme JS files as mentioned below (and change the theme property of the plugin) -->
<script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/themes/krajee-svg/theme.js"></script>

<!-- optionally if you need translation for your language then include locale file as mentioned below (replace LANG.js with your own locale file) -->
<script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/js/locales/LANG.js"></script>

<div class="breadcumb-wrapper breadcumb-layout1 pt-200 pb-50" data-bg-src="assets/img/breadcumb/breadcumb-1.jpg" data-overlay>
  <div class="container z-index-common">
    <div class="breadcumb-content text-center">
      <h1 class="breadcumb-title h1 text-white my-0">{{produit.titre}}</h1>
      <h2 class="breadcumb-bg-title">PRODUIT</h2>
      <ul class="breadcumb-menu-style1 text-white mx-auto fs-xs">
        <li>
          <a href="/home">
            <i class="fal fa-home">Accueil</i>
          </a>
        </li>
        <li>
          <a href="{{ path('listeproduits',{"id":produit.categories.id}) }}">
            <i class="active">{{produit.categories}}</i>
          </a>
        </li>
        <li class="active">{{produit.titre}}</li>
      </ul>
    </div>
  </div>
</div>

<section class="vs-product-details space-top space-md-bottom">
  <div class="container">
    <div class="position-relative z-index-common py-lg-60">
      <div class="product-details-shape bg-smoke" style="max-width: 100%;"></div>
      <div class="row">
        <div class="col-lg-6">
          <div class="product-main-img text-center pt-30 pt-lg-60">
            <div class="social-btns" style="position: relative;top: -120px;/* width: 141px; */font-size: 1000px;">
    <a class="btn facebook" href="#"><i class="fa fa-facebook"></i></a>
    <a class="btn twitter" href="#"><i class="fa fa-twitter"></i></a>


  </div>
            
            <img src="/uploads/{{produit.image}}" class="zoom-img" alt="{{produit.titre}}">
          </div>
        </div>
        <div class="col-lg-6">
          <div class="product-about">
            <div class="mb-2"></div>
            <h3 class="product-name font-theme text-normal">{{produit.titre}}</h3>
            <h class="product-name font-theme text-normal">Réference : #{{produit.ref}}</h>
            {% set et = 0 %}
            {% set j = 0 %}
             {% for etoile in ratis %}
              {% set et =  etoile.rating %}
              {% if et == 0 %}
                 <i class="fas fa-star"></i>
                 <i class="fas fa-star"></i>
                 <i class="fas fa-star"></i>
                 <i class="fas fa-star"></i>
                 <i class="fas fa-star"></i>
              {% endif %}
            {% endfor %}
            <p>{% set et= et|round %}</p>
            
            {% if et ==5 %}          
              {% for b in 1..et %}
                 <i class="fas fa-star"></i>
              {% endfor %}
              {% else %}
              {% for b in 1..et %}
                 <i class="fas fa-star"></i>
              {% endfor %}
              {% for b in et..4 %}
                 <i class="fas fa-star" style ="font-weight: inherit;"></i>
              {% endfor %}
              {% endif %}
            <table><tr><td>
            


             {% if produit.promo is null %} <h4 class="product-price text-theme2">{{produit.prix | number_format(0, ',', ' ')}} DT</h4> {%else%} {% set prix = (produit.prix * produit.promo)/100 %} {% set prix = (produit.prix - prix) %} <h4 class="product-price text-theme2" style="text-decoration: line-through;">{{produit.prix}} DT</h4></td><td> <p>offre expire aprés : <span style="color:red;" id="demo"></span></p></td></table>
   
            <h3 class="product-price text-theme2">{{prix}} DT</h3> 
            
            {%endif%}
            <hr class="border-dashed-light mt-25 mb-20">
            <p class="mb-2">{{produit.description}}</p>
            <script>
            var i = 0;
            function addClick() {
                document.getElementById('qty').value = ++i;
                a=document.getElementById('stk').value;
                if (a < i) {
                    alert("Quantité choisis a dépasser notre quantité en stock ");
                   document.getElementById('qty').value = --i;
                } 
                 
                   
            }
            function lessClick() {
                
                document.getElementById('qty').value = --i;
                 if (i <=0 ) {
    document.getElementById('qty').value = ++i;
    
  } 
            }
            </script>
            <input id="stk" name="prodId" type="hidden" value="{{produit.stock}}">
            <div class="cart-btn-group">
              <div class="quantity-box me-2 d-flex d-md-inline-flex d-lg-flex d-xl-inline-flex mb-3 mb-xl-0">
                <button class="quantity-minus qut-btn" onclick="lessClick()">
                  <i class="far fa-minus"></i>
                </button>
                <input type="text" value="1" class="qty-input" id="qty">
                <button class="quantity-plus qut-btn" onclick="addClick()">
                  <i class="far fa-plus"></i>
                </button>

                <div class="cart-btn-group">
                  
                  <a href="/panier" class="vs-btn">Ajouter au panier</a>
                  <a href="#" class="icon-btn3">
                    <i class="far fa-heart"></i>
                  </a>
                  <a href="#" class="icon-btn3">
                    <i class="far fa-search"></i>
                  </a>
                </div>
              </div>
              
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="pt-40 pt-lg-60">
      <ul class="nav nav-tabs tab-menu2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <a class="nav-link" id="desc-tab" data-bs-toggle="tab" href="#desc" role="tab" aria-controls="desc" aria-selected="true">Description</a>
        </li>
        <li class="nav-item" role="presentation"> 
        {% set j = 0 %} 
        {% for i in produit.commentaires %} 
        {% set j = j + 1 %} {% endfor %} 
        <a class="nav-link active" id="review-tab" data-bs-toggle="tab" href="#review" role="tab" aria-controls="review" aria-selected="false">Commentaires ({{j}})</a>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane" id="desc" role="tabpanel" aria-labelledby="desc-tab">
          <p class="mt-n1">{{produit.longdescription}}.</p>
          <ul class="product-list mb-15"></ul>
        </div>
        <div class="tab-pane show active" id="review" role="tabpanel" aria-labelledby="review-tab">
          <div class="vs-comment-area list-style-none vs-comments-layout1">
            <ul class="comment-list"> 
            
            {% for komm in produit.commentaires|reverse %} 
            <li class="vs-comment">
                <div class="vs-post-comment">
                  <div class="author-img">
                  {% set i= random(6) %}
                    <img src="{{asset('assets/avatar/'~i~'.png')}}" alt="{{komm.user.getUsername()}}">
                  </div>
                  <div class="comment-content">
                    <div class="comment-top">
                      <div class="comment-author">
                        <h4 class="name">{{komm.user.getUsername()}}</h4>
                        <h6 class="name">{{komm.date |date('d-m-Y h:i:s')}}</h6> 
                        <a href={{ path('supprimer_commentaires1', {'id': komm.id, 'id1': produit.id}) }}"   onclick="return confirm('vous etes sure de vouloir supprimer ?');" <i class="material-icons" style="
    color: red;
    font-size: 32px;
    width: 53px;
    position: relative;
    left: 958px;
">delete</i></a>
                        <div class="text-yellow fs-xs mb-2">
                        {% set comp = 0 %}
                         {% for j in ratis %}
                        
                        {% if komm.user.getId() == j.getUserCode() %}
                        {% set comp = j.getRating() %}
                       {% endif %}
                        {% endfor %}
               {% if comp ==5 %}          
              {% for b in 1..comp %}
                 <i class="fas fa-star"></i>
              {% endfor %}
              {% else %}
              {% for b in 1..comp %}
                 <i class="fas fa-star"></i>
              {% endfor %}
              {% for b in comp..4 %}
                 <i class="fas fa-star" style ="font-weight: inherit;"></i>
              {% endfor %}
              {% endif %}
            
            
            
              
               
            </div>
            
           
                        <div class="mb-10">
                          <span class="commented-on"></span>
                        </div>
                      </div>
                    </div>
                    <p class="text">{{komm.message}}</p>
                  </div>
                </div>
              </li> 
              
              {% endfor %}
              </ul>
              
          </div>
          <div class="col-12 form-group pt-xl-20 mb-0"> 
          {% if app.user %} 
          {% set use = app.user.getId() %}
           
      
   <div class="vs-comment-form comment-form-layout1 bg-smoke px-40 py-40 mb-30 mt-lg-30">
                <div class="form-title">
                  <h3 class="h4 font-theme text-normal mt-n2">Laisser votre avis</h3>
                </div>
                <div class="row">
                  <div class="col-12">
                    <div class="vs-rating-input mb-20">
                      <input id="input-1" name="input-1" class="rating rating-loading" data-ref="{{produit.id}}"  data-min="0"data-max="5" data-step="0.1">
            
                    </div>
                  </div>
                  {{ form_start(form1) }}
                  {{ form_widget(form1) }}
              
                  <div class="col-12 form-group mb-0">
                    <button class="vs-btn gradient-btn no-skew">Commenter</button>
                    {{ form_end(form1) }}
                  </div>
                </div>
        </div>
      </div>
    </div>
    {% else %} 
     <div class="vs-comment-form comment-form-layout1 bg-smoke px-40 py-40 mb-30 mt-lg-30">
                <div class="form-title">
                  <h3 class="h4 font-theme text-normal mt-n2">Pour pouvoir laisser votre avis vous devez <a href ="/connexion">se connecter</a></h3>
                </div>
                
                  
                      
                  </div>
                </div>
    
    
    
    
    
    
    {% endif %} </div>
  </div>
</section>
<section class="vs-product-wrapper vs-product-layout2 newsletter-pb">
  <div class="container">
    <h2 class="mt-n2 font-theme text-normal mb-4">Produits liées</h2>
    <div class="row vs-carousel arrow-margin" data-slide-show="3" data-md-slide-show="2" data-sm-slide-show="2" data-xs-slide-show="1" data-arrows="true"> {% for produitx in produits %} <div class="col-sm-6 col-lg-4">
        <div class="vs-product">
          <div class="product-img">
            <a href="{{ path('show',{"id":produit.id,"titre":produit.titre}) }}">
              <img style="height: 300px;" src="/uploads/{{produitx.image}}" class="w-100" alt="{{produitx.titre}}">
            </a>
            <div class="cart-btn-group">
              <a href="#" class="icon-btn3">
                <i class="far fa-heart"></i>
              </a>
              <a href="#" class="vs-btn">Ajouter au panier</a>
              <a href="#" class="icon-btn3">
                <i class="far fa-search"></i>
              </a>
            </div>
          </div>
          <div class="product-content">
            <div class="text-yellow fs-xs mb-2">
              {% set et = 0 %}
            {% set j = 0 %}
             {% for etoile in ratis %}
              {% set et =  etoile.rating %}
              {% if et == 0 %}
                 <i class="fas fa-star"></i>
                 <i class="fas fa-star"></i>
                 <i class="fas fa-star"></i>
                 <i class="fas fa-star"></i>
                 <i class="fas fa-star"></i>
              {% endif %}
            {% endfor %}
            <p>{% set et= et|round %}</p>
            
            {% if et ==5 %}          
              {% for b in 1..et %}
                 <i class="fas fa-star"></i>
              {% endfor %}
              {% else %}
              {% for b in 1..et %}
                 <i class="fas fa-star"></i>
              {% endfor %}
              {% for b in et..4 %}
                 <i class="fas fa-star" style ="font-weight: inherit;"></i>
              {% endfor %}
              {% endif %}
            </div>
            <h3 class="product-name text-normal font-theme fs-20 lh-base mb-2">
              <a class="text-inherit" href="{{ path('show',{"id":produit.id,"titre":produit.titre}) }}">{{produitx.titre}}</a>
            </h3> {% if produitx.promo is null %} <h4 class="product-price text-theme2">{{produitx.prix}} DT</h4> {%else%} {% set prix = (produitx.prix * produitx.promo)/100 %} <h4 class="product-price text-theme2" style="text-decoration: line-through;">{{produitx.prix}} DT</h4>
            <h3 class="product-price text-theme2">{{prix}} DT</h3> {%endif%}
          </div>
        </div>
      </div> 
      {% endfor %} 
    </div>
  </div>
  </div>
</section>
<section class="vs-newsletter-wrapper bg-dark z-index-step1">
  <div class="container">
    <div class="position-relative">
      <div class="inner-wrapper bg-black position-absolute top-50 start-50 translate-middle w-100 px-60 py-40">
        <div class="row align-items-center justify-content-center">
          <div class="col-xl-6 text-center text-xl-start mb-3 mb-xl-0">
            <span class="sub-title2 mt-2">Newsletter</span>
            <h2 class="mb-0 text-white">get monthly updates</h2>
          </div>
          <div class="col-md-10 col-lg-8 col-xl-6">
            <form action="#" class="newsletter-style1 d-md-flex">
              <input type="email" class="form-control" placeholder="Enter email address">
              <button class="vs-btn gradient-btn">Subscribe Now</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% if app.user %}
{% set use = app.user.getId() %}
{% else %}
{% set use=0 %}
{% endif %}
<script>
 /*!
 * bootstrap-star-rating v4.0.2
 * http://plugins.krajee.com/star-rating
 *
 * Author: Kartik Visweswaran
 * Copyright: 2013 - 2017, Kartik Visweswaran, Krajee.com
 *
 * Licensed under the BSD 3-Clause
 * https://github.com/kartik-v/bootstrap-star-rating/blob/master/LICENSE.md
 */
! function(e) {
    "use strict";
    "function" == typeof define && define.amd ? define(["jquery"], e) : "object" == typeof module && module.exports ? module.exports = e(require("jquery")) : e(window.jQuery)
}(function(e) {
    "use strict";
    e.fn.ratingLocales = {}, e.fn.ratingThemes = {};
    var t, a;
    t = {
        NAMESPACE: ".rating",
        DEFAULT_MIN: 0,
        DEFAULT_MAX: 5,
        DEFAULT_STEP: .5,
        isEmpty: function(t, a) {
            return null === t || void 0 === t || 0 === t.length || a && "" === e.trim(t)
        },
        getCss: function(e, t) {
            return e ? " " + t : ""
        },
        addCss: function(e, t) {
            e.removeClass(t).addClass(t)
        },
        getDecimalPlaces: function(e) {
            var t = ("" + e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
            return t ? Math.max(0, (t[1] ? t[1].length : 0) - (t[2] ? +t[2] : 0)) : 0
        },
        applyPrecision: function(e, t) {
            return parseFloat(e.toFixed(t))
        },
        handler: function(e, a, n, r, i) {
            var l = i ? a : a.split(" ").join(t.NAMESPACE + " ") + t.NAMESPACE;
            r || e.off(l), e.on(l, n)
        }
    }, a = function(t, a) {
        var n = this;
        n.$element = e(t), n._init(a)
    }, a.prototype = {
        constructor: a,
        _parseAttr: function(e, a) {
            var n, r, i, l, s = this,
                o = s.$element,
                c = o.attr("type");
            if ("range" === c || "number" === c) {
                switch (r = a[e] || o.data(e) || o.attr(e), e) {
                    case "min":
                        i = t.DEFAULT_MIN;
                        break;
                    case "max":
                        i = t.DEFAULT_MAX;
                        break;
                    default:
                        i = t.DEFAULT_STEP
                }
                n = t.isEmpty(r) ? i : r, l = parseFloat(n)
            } else l = parseFloat(a[e]);
            return isNaN(l) ? i : l
        },
        _parseValue: function(e) {
            var t = this,
                a = parseFloat(e);
            return isNaN(a) && (a = t.clearValue), !t.zeroAsNull || 0 !== a && "0" !== a ? a : null
        },
        _setDefault: function(e, a) {
            var n = this;
            t.isEmpty(n[e]) && (n[e] = a)
        },
        _initSlider: function(e) {
            var a = this,
                n = a.$element.val();
            a.initialValue = t.isEmpty(n) ? 0 : n, a._setDefault("min", a._parseAttr("min", e)), a._setDefault("max", a._parseAttr("max", e)), a._setDefault("step", a._parseAttr("step", e)), (isNaN(a.min) || t.isEmpty(a.min)) && (a.min = t.DEFAULT_MIN), (isNaN(a.max) || t.isEmpty(a.max)) && (a.max = t.DEFAULT_MAX), (isNaN(a.step) || t.isEmpty(a.step) || 0 === a.step) && (a.step = t.DEFAULT_STEP), a.diff = a.max - a.min
        },
        _initHighlight: function(e) {
            var t, a = this,
                n = a._getCaption();
            e || (e = a.$element.val()), t = a.getWidthFromValue(e) + "%", a.$filledStars.width(t), a.cache = {
                caption: n,
                width: t,
                val: e
            }
        },
        _getContainerCss: function() {
            var e = this;
            return "rating-container" + t.getCss(e.theme, "theme-" + e.theme) + t.getCss(e.rtl, "rating-rtl") + t.getCss(e.size, "rating-" + e.size) + t.getCss(e.animate, "rating-animate") + t.getCss(e.disabled || e.readonly, "rating-disabled") + t.getCss(e.containerClass, e.containerClass)
        },
        _checkDisabled: function() {
            var e = this,
                t = e.$element,
                a = e.options;
            e.disabled = void 0 === a.disabled ? t.attr("disabled") || !1 : a.disabled, e.readonly = void 0 === a.readonly ? t.attr("readonly") || !1 : a.readonly, e.inactive = e.disabled || e.readonly, t.attr({
                disabled: e.disabled,
                readonly: e.readonly
            })
        },
        _addContent: function(e, t) {
            var a = this,
                n = a.$container,
                r = "clear" === e;
            return a.rtl ? r ? n.append(t) : n.prepend(t) : r ? n.prepend(t) : n.append(t)
        },
        _generateRating: function() {
            var a, n, r, i = this,
                l = i.$element;
            n = i.$container = e(document.createElement("div")).insertBefore(l), t.addCss(n, i._getContainerCss()), i.$rating = a = e(document.createElement("div")).attr("class", "rating-stars").appendTo(n).append(i._getStars("empty")).append(i._getStars("filled")), i.$emptyStars = a.find(".empty-stars"), i.$filledStars = a.find(".filled-stars"), i._renderCaption(), i._renderClear(), i._initHighlight(), n.append(l), i.rtl && (r = Math.max(i.$emptyStars.outerWidth(), i.$filledStars.outerWidth()), i.$emptyStars.width(r)), l.appendTo(a)
        },
        _getCaption: function() {
            var e = this;
            return e.$caption && e.$caption.length ? e.$caption.html() : e.defaultCaption
        },
        _setCaption: function(e) {
            var t = this;
            t.$caption && t.$caption.length && t.$caption.html(e)
        },
        _renderCaption: function() {
            var a, n = this,
                r = n.$element.val(),
                i = n.captionElement ? e(n.captionElement) : "";
            if (n.showCaption) {
                if (a = n.fetchCaption(r), i && i.length) return t.addCss(i, "caption"), i.html(a), void(n.$caption = i);
                n._addContent("caption", '<div class="caption">' + a + "</div>"), n.$caption = n.$container.find(".caption")
            }
        },
        _renderClear: function() {
            var a, n = this,
                r = n.clearElement ? e(n.clearElement) : "";
            if (n.showClear) {
                if (a = n._getClearClass(), r.length) return t.addCss(r, a), r.attr({
                    title: n.clearButtonTitle
                }).html(n.clearButton), void(n.$clear = r);
                n._addContent("clear", '<div class="' + a + '" title="' + n.clearButtonTitle + '">' + n.clearButton + "</div>"), n.$clear = n.$container.find("." + n.clearButtonBaseClass)
            }
        },
        _getClearClass: function() {
            var e = this;
            return e.clearButtonBaseClass + " " + (e.inactive ? "" : e.clearButtonActiveClass)
        },
        _toggleHover: function(e) {
            var t, a, n, r = this;
            e && (r.hoverChangeStars && (t = r.getWidthFromValue(r.clearValue), a = e.val <= r.clearValue ? t + "%" : e.width, r.$filledStars.css("width", a)), r.hoverChangeCaption && (n = e.val <= r.clearValue ? r.fetchCaption(r.clearValue) : e.caption, n && r._setCaption(n + "")))
        },
        _init: function(t) {
            var a, n = this,
                r = n.$element.addClass("rating-input");
            return n.options = t, e.each(t, function(e, t) {
                n[e] = t
            }), (n.rtl || "rtl" === r.attr("dir")) && (n.rtl = !0, r.attr("dir", "rtl")), n.starClicked = !1, n.clearClicked = !1, n._initSlider(t), n._checkDisabled(), n.displayOnly && (n.inactive = !0, n.showClear = !1, n.showCaption = !1), n._generateRating(), n._initEvents(), n._listen(), a = n._parseValue(r.val()), r.val(a), r.removeClass("rating-loading")
        },
        _initEvents: function() {
            var e = this;
            e.events = {
                _getTouchPosition: function(a) {
                    var n = t.isEmpty(a.pageX) ? a.originalEvent.touches[0].pageX : a.pageX;
                    return n - e.$rating.offset().left
                },
                _listenClick: function(e, t) {
                    return e.stopPropagation(), e.preventDefault(), e.handled === !0 ? !1 : (t(e), void(e.handled = !0))
                },
                _noMouseAction: function(t) {
                    return !e.hoverEnabled || e.inactive || t && t.isDefaultPrevented()
                },
                initTouch: function(a) {
                    var n, r, i, l, s, o, c, u, d = e.clearValue || 0,
                        p = "ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch;
                    p && !e.inactive && (n = a.originalEvent, r = t.isEmpty(n.touches) ? n.changedTouches : n.touches, i = e.events._getTouchPosition(r[0]), "touchend" === a.type ? (e._setStars(i), u = [e.$element.val(), e._getCaption()], e.$element.trigger("change").trigger("rating.change", u), e.starClicked = !0) : (l = e.calculate(i), s = l.val <= d ? e.fetchCaption(d) : l.caption, o = e.getWidthFromValue(d), c = l.val <= d ? o + "%" : l.width, e._setCaption(s), e.$filledStars.css("width", c)))
                },
                starClick: function(t) {
                    var a, n;
         
                    e.events._listenClick(t, function(t) {
                         return e.inactive ? !1 : (a = e.events._getTouchPosition(t), e._setStars(a), n = [e.$element.val(), e._getCaption()], e.$element.trigger("change").trigger("rating.change", n), void(e.starClicked = !0))
                    })
                                    $.ajax({
              url : "{{path('addrating')}}",
               method: "GET",
              data: {
                        'ref' : e.$element.data('ref'),
                        'user' : {{use}},
              'rating':e.$element.val()
                          }
 
            });
                   
                },
                clearClick: function(t) {
                    e.events._listenClick(t, function() {
                        e.inactive || (e.clear(), e.clearClicked = !0)
                    })
                },
                starMouseMove: function(t) {
                    var a, n;
                    e.events._noMouseAction(t) || (e.starClicked = !1, a = e.events._getTouchPosition(t), n = e.calculate(a), e._toggleHover(n), e.$element.trigger("rating.hover", [n.val, n.caption, "stars"]))
                },
                starMouseLeave: function(t) {
                    var a;
                    e.events._noMouseAction(t) || e.starClicked || (a = e.cache, e._toggleHover(a), e.$element.trigger("rating.hoverleave", ["stars"]))
                },
                clearMouseMove: function(t) {
                    var a, n, r, i;
                    !e.events._noMouseAction(t) && e.hoverOnClear && (e.clearClicked = !1, a = '<span class="' + e.clearCaptionClass + '">' + e.clearCaption + "</span>", n = e.clearValue, r = e.getWidthFromValue(n) || 0, i = {
                        caption: a,
                        width: r,
                        val: n
                    }, e._toggleHover(i), e.$element.trigger("rating.hover", [n, a, "clear"]))
                },
                clearMouseLeave: function(t) {
                    var a;
                    e.events._noMouseAction(t) || e.clearClicked || !e.hoverOnClear || (a = e.cache, e._toggleHover(a), e.$element.trigger("rating.hoverleave", ["clear"]))
                },
                resetForm: function(t) {
                    t && t.isDefaultPrevented() || e.inactive || e.reset()
                }
            }
        },
        _listen: function() {
            var a = this,
                n = a.$element,
                r = n.closest("form"),
                i = a.$rating,
                l = a.$clear,
                s = a.events;
            return t.handler(i, "touchstart touchmove touchend", e.proxy(s.initTouch, a)), t.handler(i, "click touchstart", e.proxy(s.starClick, a)), t.handler(i, "mousemove", e.proxy(s.starMouseMove, a)), t.handler(i, "mouseleave", e.proxy(s.starMouseLeave, a)), a.showClear && l.length && (t.handler(l, "click touchstart", e.proxy(s.clearClick, a)), t.handler(l, "mousemove", e.proxy(s.clearMouseMove, a)), t.handler(l, "mouseleave", e.proxy(s.clearMouseLeave, a))), r.length && t.handler(r, "reset", e.proxy(s.resetForm, a), !0), n
        },
        _getStars: function(e) {
            var t, a = this,
                n = '<span class="' + e + '-stars">';
            for (t = 1; t <= a.stars; t++) n += '<span class="star">' + a[e + "Star"] + "</span>";
            return n + "</span>"
        },
        _setStars: function(e) {
            var t = this,
                a = arguments.length ? t.calculate(e) : t.calculate(),
                n = t.$element,
                r = t._parseValue(a.val);

             return n.val(r), t.$filledStars.css("width", a.width), t._setCaption(a.caption), t.cache = a, n
        },
        showStars: function(e) {
            var t = this,
                a = t._parseValue(e);
            return t.$element.val(a), t._setStars()
        },
        calculate: function(e) {
            var a = this,
                n = t.isEmpty(a.$element.val()) ? 0 : a.$element.val(),
                r = arguments.length ? a.getValueFromPosition(e) : n,
                i = a.fetchCaption(r),
                l = a.getWidthFromValue(r);
            return l += "%", {
                caption: i,
                width: l,
                val: r
            }
        },
        getValueFromPosition: function(e) {
            var a, n, r = this,
                i = t.getDecimalPlaces(r.step),
                l = r.$rating.width();
            return n = r.diff * e / (l * r.step), n = r.rtl ? Math.floor(n) : Math.ceil(n), a = t.applyPrecision(parseFloat(r.min + n * r.step), i), a = Math.max(Math.min(a, r.max), r.min), r.rtl ? r.max - a : a
        },
        getWidthFromValue: function(e) {
            var t, a, n = this,
                r = n.min,
                i = n.max,
                l = n.$emptyStars;
            return !e || r >= e || r === i ? 0 : (a = l.outerWidth(), t = a ? l.width() / a : 1, e >= i ? 100 : (e - r) * t * 100 / (i - r))
        },
        fetchCaption: function(e) {
            var a, n, r, i, l, s = this,
                o = parseFloat(e) || s.clearValue,
                c = s.starCaptions,
                u = s.starCaptionClasses;
            return o && o !== s.clearValue && (o = t.applyPrecision(o, t.getDecimalPlaces(s.step))), i = "function" == typeof u ? u(o) : u[o], r = "function" == typeof c ? c(o) : c[o], n = t.isEmpty(r) ? s.defaultCaption.replace(/\{rating}/g, o) : r, a = t.isEmpty(i) ? s.clearCaptionClass : i, l = o === s.clearValue ? s.clearCaption : n, '<span class="' + a + '">' + l + "</span>"
        },
        destroy: function() {
            var a = this,
                n = a.$element;
            return t.isEmpty(a.$container) || a.$container.before(n).remove(), e.removeData(n.get(0)), n.off("rating").removeClass("rating rating-input")
        },
        create: function(e) {
            var t = this,
                a = e || t.options || {};
            return t.destroy().rating(a)
        },
        clear: function() {
            var e = this,
                t = '<span class="' + e.clearCaptionClass + '">' + e.clearCaption + "</span>";
            return e.inactive || e._setCaption(t), e.showStars(e.clearValue).trigger("change").trigger("rating.clear")
        },
        reset: function() {
            var e = this;
            return e.showStars(e.initialValue).trigger("rating.reset")
        },
        update: function(e) {
            var t = this;
            return arguments.length ? t.showStars(e) : t.$element
        },
        refresh: function(t) {
            var a = this,
                n = a.$element;
            return t ? a.destroy().rating(e.extend(!0, a.options, t)).trigger("rating.refresh") : n
        }
    }, e.fn.rating = function(n) {
        var r = Array.apply(null, arguments),
            i = [];
        switch (r.shift(), this.each(function() {
            var l, s = e(this),
                o = s.data("rating"),
                c = "object" == typeof n && n,
                u = c.theme || s.data("theme"),
                d = c.language || s.data("language") || "en",
                p = {},
                h = {};
            o || (u && (p = e.fn.ratingThemes[u] || {}), "en" === d || t.isEmpty(e.fn.ratingLocales[d]) || (h = e.fn.ratingLocales[d]), l = e.extend(!0, {}, e.fn.rating.defaults, p, e.fn.ratingLocales.en, h, c, s.data()), o = new a(this, l), s.data("rating", o)), "string" == typeof n && i.push(o[n].apply(o, r))
        }), i.length) {
            case 0:
                return this;
            case 1:
                return void 0 === i[0] ? this : i[0];
            default:
                return i
        }
    }, e.fn.rating.defaults = {
        theme: "",
        language: "en",
        stars: 5,
        filledStar: '<i class="fas fa-star"></i>',
        emptyStar: '<i class="fas fa-star empty-star"></i>',
        //emptyStar: '<i class="far fa-star"></i>',
        containerClass: "",
        size: "xs",
        animate: !0,
        displayOnly: !1,
        rtl: !1,
        showClear: !0,
        showCaption: !0,
        starCaptionClasses: {
            1: "label label-danger",
            2: "label label-warning",
            3: "label label-info",
            4: "label label-primary",
            5: "label label-success"
        },
        clearButton: '<i class="fas fa-minus"></i>',
        clearButtonBaseClass: "clear-rating",
        clearButtonActiveClass: "clear-rating-active",
        clearCaptionClass: "label label-default",
        clearValue: null,
        captionElement: null,
        clearElement: null,
        hoverEnabled: !0,
        hoverChangeCaption: !0,
        hoverChangeStars: !0,
        hoverOnClear: !0,
        zeroAsNull: !0
    }, e.fn.ratingLocales.en = {
        defaultCaption: "{rating} Etoile",
        starCaptions: {
            1: "Une étoile",
            2: "Deux étoile",
            3: "Trois étoile",
            4: "Quatre étoile",
            5: "cinq étoile"
        },
        clearButtonTitle: "Clear",
        clearCaption: "Non évalué"
    }, e.fn.rating.Constructor = a, e(document).ready(function() {
        var t = e("input.rating");
        t.length && t.removeClass("rating-loading").addClass("rating-loading").rating()
    })
});
 </script> 
 <script>
 var text = encodeURIComponent("Profiter de {{produit.promo}} % sur le produit {{produit.titre}} de {{produit.prix}}TND  seulement prix imbattable");
var url = "{{ app.request.uri }}"; 
var user_id = "jagathish1123";
var description= text;
var picture="http://127.0.0.1:8000/uploads/{{produit.image}}";
var caption=text;
var hash_tags = "JS,JavaScript,100DaysOfCode,Programming";
var params = "menubar=no,toolbar=no,status=no,width=570,height=570"; // for window
var facebook = document.querySelector('.facebook');
var twitter = document.querySelector('.twitter');
facebook.addEventListener('click', function(ev) {
  console.log("hi");
    
    let shareUrl = `http://www.facebook.com/sharer/sharer.php?u=${url}&caption={caption}&description={description}`;
    window.open(shareUrl,"NewWindow" , params);  
});
twitter.addEventListener('click', function(ev) {
  let shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${text}&via=${user_id}&hashtags=${hash_tags}`;
   window.open(shareUrl,"NewWindow" , params);
});
 </script>

 <script>
    // Set the date we're counting down to
    var tomorrow = new Date();
    tomorrow.setDate(tomorrow.getDate() + 1);
    
    // Update the count down every 1 second
    var x = setInterval(function() {
    
      // Get todays date and time
      var now = new Date().getTime();
    
      // Find the distance between now an the count down date
      var distance = tomorrow - now;
    
      // Time calculations for days, hours, minutes and seconds
      var days = Math.floor(distance / (1000 * 60 * 60 * 24));
      var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      var seconds = Math.floor((distance % (1000 * 60)) / 1000);
    
      // Display the result in the element with id="demo"
      document.getElementById("demo").innerHTML = days + "jrs " + hours + "h "
      + minutes + "m " + seconds + "s ";
    
      // If the count down is finished, write some text 
      if (distance < 0) {
        clearInterval(x);
        document.getElementById("demo").innerHTML = "EXPIRED";
      }
    }, 1000);
    </script>
{% endblock %}